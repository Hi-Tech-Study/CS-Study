<!DOCTYPE html> <html lang="en"> <head> <meta charset="UTF-8"> <meta http-equiv="X-UA-Compatible" content="IE=Edge"> <link rel="stylesheet" href="/assets/css/just-the-docs-default.css"> <link rel="stylesheet" href="/assets/css/just-the-docs-head-nav.css" id="jtd-head-nav-stylesheet"> <style id="jtd-nav-activation"> .site-nav > ul.nav-list:first-child > li:not(:nth-child(54)) > a, .site-nav > ul.nav-list:first-child > li > ul > li a { background-image: none; } .site-nav > ul.nav-list:not(:first-child) a, .site-nav li.external a { background-image: none; } .site-nav > ul.nav-list:first-child > li:nth-child(54) > a { font-weight: 600; text-decoration: none; }.site-nav > ul.nav-list:first-child > li:nth-child(54) > button svg { transform: rotate(-90deg); }.site-nav > ul.nav-list:first-child > li.nav-list-item:nth-child(54) > ul.nav-list { display: block; } </style> <script src="/assets/js/vendor/lunr.min.js"></script> <script src="/assets/js/just-the-docs.js"></script> <meta name="viewport" content="width=device-width, initial-scale=1"> <!-- Begin Jekyll SEO tag v2.8.0 --> <title>백업(Backup)과 복구(Recovery) | Dev Open Library</title> <meta name="generator" content="Jekyll v3.10.0" /> <meta property="og:title" content="백업(Backup)과 복구(Recovery)" /> <meta property="og:locale" content="en" /> <meta name="description" content="A minimal, responsive and feature-rich Jekyll theme for technical writing." /> <meta property="og:description" content="A minimal, responsive and feature-rich Jekyll theme for technical writing." /> <link rel="canonical" href="http://localhost:4000/Database/db_backup_recovery.html" /> <meta property="og:url" content="http://localhost:4000/Database/db_backup_recovery.html" /> <meta property="og:site_name" content="Dev Open Library" /> <meta property="og:type" content="website" /> <meta name="twitter:card" content="summary" /> <meta property="twitter:title" content="백업(Backup)과 복구(Recovery)" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"WebPage","description":"A minimal, responsive and feature-rich Jekyll theme for technical writing.","headline":"백업(Backup)과 복구(Recovery)","url":"http://localhost:4000/Database/db_backup_recovery.html"}</script> <!-- End Jekyll SEO tag --> </head> <body> <a class="skip-to-main" href="#main-content">Skip to main content</a> <svg xmlns="http://www.w3.org/2000/svg" class="d-none"> <symbol id="svg-link" viewBox="0 0 24 24"> <title>Link</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-link"> <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path> </svg> </symbol> <symbol id="svg-menu" viewBox="0 0 24 24"> <title>Menu</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"> <line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line> </svg> </symbol> <symbol id="svg-arrow-right" viewBox="0 0 24 24"> <title>Expand</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-right"> <polyline points="9 18 15 12 9 6"></polyline> </svg> </symbol> <!-- Feather. MIT License: https://github.com/feathericons/feather/blob/master/LICENSE --> <symbol id="svg-external-link" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-external-link"> <title id="svg-external-link-title">(external link)</title> <path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path><polyline points="15 3 21 3 21 9"></polyline><line x1="10" y1="14" x2="21" y2="3"></line> </symbol> <symbol id="svg-doc" viewBox="0 0 24 24"> <title>Document</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file"> <path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"></path><polyline points="13 2 13 9 20 9"></polyline> </svg> </symbol> <symbol id="svg-search" viewBox="0 0 24 24"> <title>Search</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-search"> <circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line> </svg> </symbol> <!-- Bootstrap Icons. MIT License: https://github.com/twbs/icons/blob/main/LICENSE.md --> <symbol id="svg-copy" viewBox="0 0 16 16"> <title>Copy</title> <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-clipboard" viewBox="0 0 16 16"> <path d="M4 1.5H3a2 2 0 0 0-2 2V14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3.5a2 2 0 0 0-2-2h-1v1h1a1 1 0 0 1 1 1V14a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V3.5a1 1 0 0 1 1-1h1v-1z"/> <path d="M9.5 1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5h3zm-3-1A1.5 1.5 0 0 0 5 1.5v1A1.5 1.5 0 0 0 6.5 4h3A1.5 1.5 0 0 0 11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3z"/> </svg> </symbol> <symbol id="svg-copied" viewBox="0 0 16 16"> <title>Copied</title> <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-clipboard-check-fill" viewBox="0 0 16 16"> <path d="M6.5 0A1.5 1.5 0 0 0 5 1.5v1A1.5 1.5 0 0 0 6.5 4h3A1.5 1.5 0 0 0 11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3Zm3 1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5h3Z"/> <path d="M4 1.5H3a2 2 0 0 0-2 2V14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3.5a2 2 0 0 0-2-2h-1v1A2.5 2.5 0 0 1 9.5 5h-3A2.5 2.5 0 0 1 4 2.5v-1Zm6.854 7.354-3 3a.5.5 0 0 1-.708 0l-1.5-1.5a.5.5 0 0 1 .708-.708L7.5 10.793l2.646-2.647a.5.5 0 0 1 .708.708Z"/> </svg> </symbol> </svg> <div class="side-bar"> <div class="site-header" role="banner"> <a href="/" class="site-title lh-tight"> Dev Open Library </a> <button id="menu-button" class="site-button btn-reset" aria-label="Toggle menu" aria-pressed="false"> <svg viewBox="0 0 24 24" class="icon" aria-hidden="true"><use xlink:href="#svg-menu"></use></svg> </button> </div> <nav aria-label="Main" id="site-nav" class="site-nav"> <ul class="nav-list"><li class="nav-list-item"><a href="/" class="nav-list-link">CS Study Notes</a></li><li class="nav-list-item"><a href="/Web/web_cdn.html" class="nav-list-link">CDN (Content Delivery Network)</a></li><li class="nav-list-item"><a href="/Network/network_cors.html" class="nav-list-link">CORS</a></li><li class="nav-list-item"><a href="/OS/os_cpu_scheduling.html" class="nav-list-link">CPU Scheduling</a></li><li class="nav-list-item"><a href="/Web/web_csr_ssr.html" class="nav-list-link">CSR, SSR 의 등장 배경</a></li><li class="nav-list-item"><a href="/Web/web_csrf.html" class="nav-list-link">CSRF(Cross-site request forgery, 사이트 간 요청 위조)</a></li><li class="nav-list-item"><a href="/OS/os_com_and_operating_system.html" class="nav-list-link">Computer 구조</a></li><li class="nav-list-item"><a href="/Database/db_cache.html" class="nav-list-link">DB 캐싱</a></li><li class="nav-list-item"><a href="/Algorithm/ag_dfs_bfs.html" class="nav-list-link">DFS와 BFS</a></li><li class="nav-list-item"><a href="/Algorithm/ag_dp.html" class="nav-list-link">DP (Dynamic Programming)</a></li><li class="nav-list-item"><a href="/OS/os_deadlock.html" class="nav-list-link">Deadlock이란?</a></li><li class="nav-list-item"><a href="/Network/network_dns.html" class="nav-list-link">Domain</a></li><li class="nav-list-item"><a href="/Design_Pattern/dp_factory_pattern.html" class="nav-list-link">Factory Pattern</a></li><li class="nav-list-item"><a href="/Algorithm/ag_gcd_lcm.html" class="nav-list-link">GCD(Greatest Common Divisor) 알고리즘</a></li><li class="nav-list-item"><a href="/Web/graphql.html" class="nav-list-link">GraphQL</a></li><li class="nav-list-item"><a href="/Network/network_http_https.html" class="nav-list-link">HTTP (Hyper Text Transfer Protocol)</a></li><li class="nav-list-item"><a href="/Network/network_http_message.html" class="nav-list-link">HTTP 메시지</a></li><li class="nav-list-item"><a href="/Network/network_ip.html" class="nav-list-link">IP의 정의와 역할</a></li><li class="nav-list-item"><a href="/Database/db_index.html" class="nav-list-link">Index? 그게뭔데!</a></li><li class="nav-list-item"><a href="/Design_Pattern/dp_iterator_pattern.html" class="nav-list-link">Iterator pattern</a></li><li class="nav-list-item"><a href="/Web/web_jwt.html" class="nav-list-link">JWT</a></li><li class="nav-list-item"><a href="/Design_Pattern/dp_mvc_pattern.html" class="nav-list-link">MVC 패턴</a></li><li class="nav-list-item"><a href="/Design_Pattern/dp_mvp_pattern.html" class="nav-list-link">MVP Architecture Pattern</a></li><li class="nav-list-item"><a href="/Design_Pattern/dp_mvvm_pattern.html" class="nav-list-link">MVVM 패턴 정의</a></li><li class="nav-list-item"><a href="/Data_Structure/ds_map.html" class="nav-list-link">Map</a></li><li class="nav-list-item"><a href="/OS/os_memory.html" class="nav-list-link">Memory</a></li><li class="nav-list-item"><a href="/OS/os_multi_processing.html" class="nav-list-link">Multi Process (멀티 프로세스)</a></li><li class="nav-list-item"><a href="/Network/network_devices.html" class="nav-list-link">Network Device</a></li><li class="nav-list-item"><a href="/Network/network_osi_tcpip.html" class="nav-list-link">OSI 7계층 &amp; TCP/IP 4계층</a></li><li class="nav-list-item"><a href="/OS/os_pcb_and_context_switch.html" class="nav-list-link">PCB와 Context Switching</a></li><li class="nav-list-item"><a href="/Database/db_query_optimization.html" class="nav-list-link">Query Optimization(Slow Query Tuning)</a></li><li class="nav-list-item"><a href="/Algorithm/ag_quick_sort.html" class="nav-list-link">Quick Sort</a></li><li class="nav-list-item"><a href="/Web/restful_api.html" class="nav-list-link">RESTful API 설계 원칙과 네이밍 컨벤션</a></li><li class="nav-list-item"><a href="/Data_Structure/ds_set.html" class="nav-list-link">Set</a></li><li class="nav-list-item"><a href="/OS/os_Blocking_Non-Blocking_Synchronous_Asynchronous.html" class="nav-list-link">Synchronous?</a></li><li class="nav-list-item"><a href="/Network/network_tcp.html" class="nav-list-link">TCP</a></li><li class="nav-list-item"><a href="/OS/os_thread.html" class="nav-list-link">Thread</a></li><li class="nav-list-item"><a href="/Network/network_udp.html" class="nav-list-link">UDP (User Datagram Protocol)</a></li><li class="nav-list-item"><a href="/Web/web_ws_was.html" class="nav-list-link">Web Server</a></li><li class="nav-list-item"><a href="/OS/os_mutex_semaphore.html" class="nav-list-link">공유 자원 &amp; 임계 영역(Semaphore &amp; Mutex)</a></li><li class="nav-list-item"><a href="/Algorithm/ag_implementation.html" class="nav-list-link">구현(Implementation)</a></li><li class="nav-list-item"><a href="/Algorithm/ag_greedy.html" class="nav-list-link">그리디 (Greedy)</a></li><li class="nav-list-item"><a href="/Network/readme_NW.html" class="nav-list-link">네트워크</a></li><li class="nav-list-item"><a href="/Network/network_basic.html" class="nav-list-link">네트워크의 기초</a></li><li class="nav-list-item"><a href="/Design_Pattern/dp_revealing_module_pattern.html" class="nav-list-link">노출모듈 패턴 정의</a></li><li class="nav-list-item"><a href="/Algorithm/ag_dijkstra.html" class="nav-list-link">다익스트라(dijkstra) 알고리즘</a></li><li class="nav-list-item"><a href="/Database/db_migration.html" class="nav-list-link">데이터 마이그레이션 정리 노트</a></li><li class="nav-list-item"><a href="/Database/readme_DB.html" class="nav-list-link">데이터베이스</a></li><li class="nav-list-item"><a href="/Database/db_basic.html" class="nav-list-link">데이터베이스(Database) 기초</a></li><li class="nav-list-item"><a href="/Database/db_types_of_databases.html" class="nav-list-link">데이터베이스의 종류</a></li><li class="nav-list-item"><a href="/Design_Pattern/readme_DP.html" class="nav-list-link">디자인패턴</a></li><li class="nav-list-item"><a href="/Network/network_load_balancing.html" class="nav-list-link">로드 밸런싱이란?</a></li><li class="nav-list-item"><a href="/Data_Structure/ds_array_vector.html" class="nav-list-link">배열(Array)</a></li><li class="nav-list-item"><a href="/Database/db_backup_recovery.html" class="nav-list-link">백업(Backup)과 복구(Recovery)</a></li><li class="nav-list-item"><a href="/Database/db_distributed_database.html" class="nav-list-link">분산형 데이터베이스</a></li><li class="nav-list-item"><a href="/Algorithm/ag_divide_and_conquer.html" class="nav-list-link">분할 정복 알고리즘</a></li><li class="nav-list-item"><a href="/Algorithm/ag_bitMask.html" class="nav-list-link">비트마스크</a></li><li class="nav-list-item"><a href="/Algorithm/ag_permutation_combination.html" class="nav-list-link">순열 &amp; 조합</a></li><li class="nav-list-item"><a href="/Algorithm/ag_stack_queue.html" class="nav-list-link">스택 &amp; 큐</a></li><li class="nav-list-item"><a href="/Data_Structure/ds_stack_queue.html" class="nav-list-link">스택 &amp; 큐</a></li><li class="nav-list-item"><a href="/Database/db_explain.html" class="nav-list-link">실행 계획(EXPLAIN) 분석</a></li><li class="nav-list-item"><a href="/Design_Pattern/dp_singleton_pattern.html" class="nav-list-link">싱글톤 패턴</a></li><li class="nav-list-item"><a href="/Algorithm/readme_AG.html" class="nav-list-link">알고리즘</a></li><li class="nav-list-item"><a href="/Data_Structure/ds_Time_Space%20Complexity.html" class="nav-list-link">알고리즘의 성능 분석: Big-O 표기법과 복잡도 이해하기</a></li><li class="nav-list-item"><a href="/Data_Structure/ds_linked_list.html" class="nav-list-link">연결 리스트 (Linked List)</a></li><li class="nav-list-item"><a href="/OS/readme_OS.html" class="nav-list-link">운영체제</a></li><li class="nav-list-item"><a href="/Web/readme_Web.html" class="nav-list-link">웹</a></li><li class="nav-list-item"><a href="/Network/network_web_server.html" class="nav-list-link">웹 서버</a></li><li class="nav-list-item"><a href="/Database/db_event_sourcing_cqrs.html" class="nav-list-link">이벤트 소싱(Event Sourcing)과 CQRS(Command Query Responsibillity Segregation)</a></li><li class="nav-list-item"><a href="/Algorithm/ag_binary_search.html" class="nav-list-link">이분 탐색 (Binary Search)</a></li><li class="nav-list-item"><a href="/Data_Structure/ds_binary_tree.html" class="nav-list-link">이진 트리, 이진 탐색 트리</a></li><li class="nav-list-item"><a href="/Data_Structure/readme_DS.html" class="nav-list-link">자료구조</a></li><li class="nav-list-item"><a href="/Design_Pattern/dp_strategy_pattern.html" class="nav-list-link">전략패턴(Strategy Pattern) 개요</a></li><li class="nav-list-item"><a href="/Database/db_normal_forms.html" class="nav-list-link">정규화</a></li><li class="nav-list-item"><a href="/Design_Pattern/dp_observer_pattern.html" class="nav-list-link">정의</a></li><li class="nav-list-item"><a href="/Database/db_join.html" class="nav-list-link">조인(JOIN)</a></li><li class="nav-list-item"><a href="/Network/cookie_and_session.html" class="nav-list-link">쿠키 &amp; 세션</a></li><li class="nav-list-item"><a href="/Database/db_transaction.html" class="nav-list-link">트랜잭션(Transaction)</a></li><li class="nav-list-item"><a href="/Data_Structure/ds_tree_graph.html" class="nav-list-link">트리와 그래프의 공통점</a></li><li class="nav-list-item"><a href="/Database/db_partitioning_sharding.html" class="nav-list-link">파티셔닝 (Partitioning)</a></li><li class="nav-list-item"><a href="/OS/os_process.html" class="nav-list-link">프로세스(Process)란?</a></li><li class="nav-list-item"><a href="/Design_Pattern/dp_proxy_pattern.html" class="nav-list-link">프록시 패턴 (Proxy Pattern)</a></li><li class="nav-list-item"><a href="/Algorithm/ag_merge_sort.html" class="nav-list-link">합병 정렬(Merge Sort)</a></li><li class="nav-list-item"><a href="/Algorithm/ag_hashing.html" class="nav-list-link">해싱(Hashing)이란?</a></li><li class="nav-list-item"><a href="/Data_Structure/ds_hash_table.html" class="nav-list-link">해싱, 해시 함수 란?</a></li><li class="nav-list-item"><a href="/Data_Structure/ds_heap_priority_queue.html" class="nav-list-link">힙(Heap)</a></li><li class="nav-list-item"><a href="/Algorithm/ag_heap.html" class="nav-list-link">힙(Heap)</a></li><li class="nav-list-item"><a href="/Algorithm/ag_heap_sort.html" class="nav-list-link">힙(Heap)이란, 어떤 자료구조일까?</a></li></ul> </nav> <footer class="site-footer"> This site uses <a href="https://github.com/just-the-docs/just-the-docs">Just the Docs</a>, a documentation theme for Jekyll. </footer> </div> <div class="main" id="top"> <div id="main-header" class="main-header"> <div class="search" role="search"> <div class="search-input-wrap"> <input type="text" id="search-input" class="search-input" tabindex="0" placeholder="Search Dev Open Library" aria-label="Search Dev Open Library" autocomplete="off"> <label for="search-input" class="search-label"><svg viewBox="0 0 24 24" class="search-icon"><use xlink:href="#svg-search"></use></svg></label> </div> <div id="search-results" class="search-results"></div> </div> </div> <div class="main-content-wrap"> <div id="main-content" class="main-content"> <main> <h1 id="백업backup과-복구recovery"> <a href="#백업backup과-복구recovery" class="anchor-heading" aria-labelledby="백업backup과-복구recovery"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 백업(Backup)과 복구(Recovery) </h1> <ul> <li>Mysql 8.4를 기준으로 작성했습니다.</li> </ul><hr /> <h2 id="백업의-유형"> <a href="#백업의-유형" class="anchor-heading" aria-labelledby="백업의-유형"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 백업의 유형 </h2> <p>백업은 여러가지 기준에 따라 유형으로 나뉩니다.</p> <ul> <li>백업 방식: 물리적 / 논리적</li> <li>백업 대상: 전체 백업 / 증분 백업</li> <li>서버 상태: 로컬 백업 / 서버 백업</li> <li>백업 장소: 온라인 백업 / 오프라인 백업</li> </ul> <h3 id="물리적-백업과-논리적-백업"> <a href="#물리적-백업과-논리적-백업" class="anchor-heading" aria-labelledby="물리적-백업과-논리적-백업"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 물리적 백업과 논리적 백업 </h3> <ul> <li>물리적 백업(Physical Backup) <ul> <li>개념 <ul> <li>데이터베이스 <strong>파일과 디렉토리를 원본 그대로 복사</strong>하여 백업하는 방식입니다.</li> </ul> </li> <li>특징 <ul> <li>하드웨어에 종속적 <ul> <li>복구는 동일하거나 유사한 하드웨어 특성을 갖춘 곳에만 가능합니다.</li> <li>동일한 서버 환경을 구성시 사용하기 좋습니다.</li> </ul> </li> <li>빠른 속도 <ul> <li>파일과 디렉토리를 그대로 복사하기 때문에, 백업과 복구시 따로 변환 과정이 없어 빠릅니다.</li> <li>대용량의 데이터에 대해 백업 및 복구할 때 사용하기 좋습니다.</li> </ul> </li> <li>주의점 <ul> <li>서버가 운영 중 이라면, 백업 중 내용을 변경하지 못하도록 잠금한 후 진행해야합니다.</li> <li>실행중이지 않다면 바로 진행할 수 있습니다.</li> </ul> </li> <li>DB 외에도 관련 파일(로그나 구성 파일등)이 포함될 수 있습니다.</li> <li><code class="language-plaintext highlighter-rouge">mysqlbackup</code>이나 파일 복사 명령어(<code class="language-plaintext highlighter-rouge">cp</code>, <code class="language-plaintext highlighter-rouge">scp</code>, <code class="language-plaintext highlighter-rouge">tar</code>, <code class="language-plaintext highlighter-rouge">rsync</code> 등)를 통해 백업할 수 있습니다.</li> <li>같은 설정과 로그 상태를 재현: DB 외에도 관련 파일(로그나 구성 파일등)이 포함될 수 있습니다. <ul> <li>로그: MySQL 에러 로그 등, 구성 파일: MySQL 설정 파일(my.cnf 등)</li> </ul> </li> </ul> </li> </ul> </li> <li>논리적 백업 <ul> <li>개념 <ul> <li>논리적 DB구조(<code class="language-plaintext highlighter-rouge">CREATE DATABASE</code>, <code class="language-plaintext highlighter-rouge">CREATE TABLE</code>)와 내용(<code class="language-plaintext highlighter-rouge">INSERT</code>, 구분된 텍스트 파일)으로 표현된 정보를 저장 하는 방식입니다.</li> </ul> </li> <li>특징 <ul> <li>높은 휴대성 <ul> <li>명령어를 다시 실행하는 방식으로 진행되기 때문에, 하드웨어에 종속되지 않습니다.</li> <li>다른 하드웨어, 운영체제로 이관시 사용하기 좋습니다.</li> </ul> </li> <li>느린 속도 <ul> <li>서버가 DB 정보를 논리적인 형식으로 변환해야 하기 때문에 물리적 백업보다 느립니다.</li> </ul> </li> <li>서버 중지 불필요 <ul> <li>서버는 실행 중인 상태여야 가능하지만, 잠금할 필요는 없습니다.</li> <li>운영 중인 서비스에 큰 영향 없이 백업을 진행할 수 있습니다.</li> </ul> </li> <li><code class="language-plaintext highlighter-rouge">mysqldump</code>이나 <code class="language-plaintext highlighter-rouge">INTO OUTFILE</code>을 통해 백업할 수 있습니다.</li> </ul> </li> </ul> </li> </ul> <h3 id="온라인-백업과-오프라인-백업"> <a href="#온라인-백업과-오프라인-백업" class="anchor-heading" aria-labelledby="온라인-백업과-오프라인-백업"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 온라인 백업과 오프라인 백업 </h3> <ul> <li>온라인 백업(Online Backup, Hot Backup) <ul> <li>개념 <ul> <li>서버가 <strong>실행 중인</strong> 상태에서 백업을 진행하는 방식입니다.</li> </ul> </li> <li>특징 <ul> <li>운영 중인 서비스나 다른 클라이언트는 데이터를 읽을 수 있습니다.</li> <li>적절한 잠금 필요: 데이터 백업과 복구시에 데이터의 무결성을 위해, 적절한 잠금 처리가 필요합니다.</li> </ul> </li> </ul> </li> <li>오프라인 백업(Offline Backup, Cold Backup) <ul> <li>개념 <ul> <li>서버가 <strong>중지된</strong> 상태에서 백업을 진행하는 방식입니다.</li> <li>운영서버가 아닌 복제(Replica)서버를 오프라인으로 전환하여 백업하는 방식도 있습니다.</li> </ul> </li> <li>특징 <ul> <li>오프라인이기 때문에, 모든 서비스가 중지됩니다.</li> <li>간단한 백업 절차: 서버가 중지되어 데이터 무결성이 지켜집니다.</li> </ul> </li> </ul> </li> <li>Warm Backup <ul> <li>개념 <ul> <li>온라인과 오프라인 중간의 개념을 의미합니다.</li> <li>서버는 실행 중이지만, 데이터 수정이 불가능한 상태에서 백업하는 방식</li> </ul> </li> <li>특징 <ul> <li>데이터는 읽을 수 있지만, 수정할 수 없는 상태로 백업하는 것을 의미 합니다.</li> </ul> </li> </ul> </li> </ul> <h3 id="로컬-백업과-원격-백업"> <a href="#로컬-백업과-원격-백업" class="anchor-heading" aria-labelledby="로컬-백업과-원격-백업"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 로컬 백업과 원격 백업 </h3> <ul> <li>로컬 백업(Local Backup) <ul> <li>개념 <ul> <li>백업하는 서버와 백업의 대상 서버가 동일한 호스트에서 백업하는 방식입니다.</li> <li>백업 수행 서버 = 백업 대상 서버</li> </ul> </li> <li>특징 <ul> <li>속도와 안정성: 동일한 서버에서 수행되어 빠르고 안정적입니다.</li> <li>물리적 백업: 물리적 백업시, 주로 로컬 백업 방식을 이용합니다.</li> </ul> </li> </ul> </li> <li>원격 백업(Remote Backup) <ul> <li>개념 <ul> <li>백업하는 서버와 백업의 대상 서버가 다른 호스트에서 백업하는 방식입니다.</li> <li>백업 수행 서버 != 백업 대상 서버, 백업 수행 서버와 백업 대상 서버는 네트워크를 통해 통신하며 백업하는 방식힙니다.</li> </ul> </li> <li>특징 <ul> <li>물리적 백업: 물리적 백업시, 백업 파일의 목적지는 원격지로 설정(<code class="language-plaintext highlighter-rouge">scp</code>, <code class="language-plaintext highlighter-rouge">rsync</code> 등을 이용)할 수 있습니다.</li> </ul> </li> </ul> </li> </ul> <p>도구에 따른 비교</p> <ul> <li><code class="language-plaintext highlighter-rouge">mysqldump</code> <ul> <li>로컬과 원격 관계없이 사용할 수 있습니다.</li> <li>저장 위치 <ul> <li>SQL 형식: 클라이언트(명령어를 실행한 곳)에 저장됩니다.</li> <li><code class="language-plaintext highlighter-rouge">--tab</code>옵션 사용시(CSV 파일형식 등): 서버(명령어를 수행하는 곳)에 저장됩니다.</li> </ul> </li> </ul> </li> <li><code class="language-plaintext highlighter-rouge">SELECT … INTO OUTFILE</code> <ul> <li>로컬과 원격 관계없이 사용할 수 있습니다.</li> <li>저장 위치: 항상 서버측(명령어를 수행하는 곳)에 저장됩니다.</li> </ul> </li> <li>물리적 백업 <ul> <li>주로 로컬 백업 방식을 이용합니다.</li> <li>백업 파일의 목적지를 원격지로 설정(<code class="language-plaintext highlighter-rouge">scp</code>, <code class="language-plaintext highlighter-rouge">rsync</code> 등을 이용)할 수 있습니다.</li> </ul> </li> </ul> <blockquote> <p><code class="language-plaintext highlighter-rouge">mysqldump</code></p> <ul> <li>기본 사용 <ul> <li>SQL 형식으로 출력되며, 표준출력에 보여집니다.</li> <li><code class="language-plaintext highlighter-rouge">&gt;</code> 또는 <code class="language-plaintext highlighter-rouge">&gt;&gt;</code>연산자를 이용해, 파일로 저장합니다.</li> </ul> </li> <li><code class="language-plaintext highlighter-rouge">--tab</code> 옵션 사용 <ul> <li>각 테이블에 대해 2개의 파일이 하나의 디렉토리에 생성됩니다. <ul> <li>데이터 파일:데이터의 내용이 csv 와 같은 형식(tab을 구분자로 한 형식)의 텍스트 파일</li> <li>테이블 구조: 테이블 구조를 정의하는 SQL파일</li> </ul> </li> </ul> </li> </ul> </blockquote> <h3 id="스냅샷snapshot-백업"> <a href="#스냅샷snapshot-백업" class="anchor-heading" aria-labelledby="스냅샷snapshot-백업"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 스냅샷(Snapshot) 백업 </h3> <ul> <li>개념 <ul> <li>파일 시스템 상태를 그대로 캡처하여 보관하는 방식입니다.</li> <li>파일 시스템의 상태를 논리적으로 복사하는 방식(실제 파일 데이터를 전체 복사하는 것이 아님)입니다.</li> </ul> </li> <li>특징 <ul> <li><strong>일부 파일 시스템(LVM, ZFS, veritas Volume Manager)에서 지원하는 방식</strong>으로, DB에서 지원하는 방식이 아닙니다. <ul> <li>따라서 DB에서 직접 복구에 사용되지 않습니다.</li> </ul> </li> <li>복구시 활용 <ul> <li>스냅샷을 통해 파일 시스템 자체를 특정 시점으로 롤백합니다.</li> <li>스냅샷 파일을 별도의 디렉토리에 마운트해, 스냅샷 내의 데이터를 복사합니다.</li> </ul> </li> </ul> </li> </ul> <h3 id="전체-백업과-증분-백업"> <a href="#전체-백업과-증분-백업" class="anchor-heading" aria-labelledby="전체-백업과-증분-백업"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 전체 백업과 증분 백업 </h3> <ul> <li>전체 백업(Full Backup) <ul> <li>개념 <ul> <li>전체 데이터를 특정 시점에 1번 백업하는 방식입니다.</li> </ul> </li> <li>특징 <ul> <li>완전한 복구 가능 <ul> <li>특정 시점의 상태를 완전히 복원할 수 있습니다.</li> <li>백업 시점 이후 내용이 변경되었다면, 최신 상태가 아닐 수 있습니다.</li> </ul> </li> <li>백업 파일 크기: 서버에 존재하는 모든 데이터를 백업하기 때문에 큽니다.</li> <li>백업 속도: 백업 파일의 크기가 커서 느립니다.</li> <li><code class="language-plaintext highlighter-rouge">mysqldump</code>, <code class="language-plaintext highlighter-rouge">mysqlbackup</code> 등을 이용해 전체 데이터를 백업합니다.</li> </ul> </li> </ul> </li> <li>증분 백업(Point-in-Time Backup) <ul> <li>개념 <ul> <li>변경된 데이터만 추가로 백업하는 방식입니다.</li> <li>전체 백업과 조합하여 사용합니다. <ul> <li>전체 백업 이후의 변경된 데이터를 백업합니다.</li> </ul> </li> </ul> </li> <li>특징 <ul> <li>복구 <ul> <li>전체 백업을 먼저 복원 -&gt; 변경사항을 순차적용</li> </ul> </li> <li>백업 파일 크기: 변경된 데이터만 백업하므로 백업 파일의 크기가 작습니다.</li> <li>백업 속도: 백업 파일 크기가 작아 빠릅니다.</li> <li><code class="language-plaintext highlighter-rouge">Binary Log</code>를 이용하여 변경 사항을 기록합니다. <ul> <li><code class="language-plaintext highlighter-rouge">Binary Log</code>를 활성화하면 데이터 변경 사항이 로그 파일에 기록합니다.</li> <li>특정 시점까지만 복구할 수 있습니다.</li> </ul> </li> </ul> </li> </ul> </li> </ul> <h2 id="백업-스케줄링-압축-암호화"> <a href="#백업-스케줄링-압축-암호화" class="anchor-heading" aria-labelledby="백업-스케줄링-압축-암호화"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 백업 스케줄링, 압축, 암호화 </h2> <p>백업 스케줄링, 압축, 암호화는 백업 절차를 자동화 하는데 유용합니다.</p> <p>DB에서는 직접 제공하지 않아, 다른 솔루션을 이용해야합니다.</p> <ul> <li>예시 <ul> <li>스케줄링: linux의 crontab, windows scheduler 등을 이용해 백업 주기 설정</li> <li>압축: gzip, tar, zip을 이용해 백업 파일 압축</li> <li>암호화: openssl 등을 이용해 백업 파일 암호화</li> </ul> </li> </ul> <h2 id="백업-전략"> <a href="#백업-전략" class="anchor-heading" aria-labelledby="백업-전략"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 백업 전략 </h2> <blockquote> <p>다양한 백업 방식을 아는 것보다 중요한건, 이를 이용해 실무에서 백업을 하고 문제상황이 생겼을 때 백업을 이용해 복구하는 것입니다.<br /> 그러기 위해서는 백업 정책을 정의하는 것이고, 백업 정책에서 중요한 것은 정기적인 백업이 이루어져야 하며, 백업 후 복구 가능성을 항상 점검해야 합니다.</p> </blockquote> <p>mysql에서 제공하는 예시를 통해 어떻게 정기적인 백업을 설정해야하고,이를 복구시에 이용할지에 대해 알아봅시다.</p> <h3 id="전체-백업-이용하기"> <a href="#전체-백업-이용하기" class="anchor-heading" aria-labelledby="전체-백업-이용하기"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 전체 백업 이용하기 </h3> <blockquote> <p>물리적 백업을 할 수도 있고, 논리적인 백업을 할 수도 있겠지만, 여기서는 mysqldump를 이용한 논리적 백업을 이용합니다.</p> </blockquote> <p>가장 부하가 적은 시간대에 전체 백업을 수행합니다.</p> <blockquote> <p>일요일 오후 1시에 전체 백업을 수행, 백업할 테이블은 InnoDB라고 가정</p> </blockquote> <div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$&gt;</span> mysqldump <span class="nt">--all-databases</span> <span class="nt">--source-data</span> <span class="nt">--single-transaction</span> <span class="o">&gt;</span> backup_sunday_1_PM.sql
</code></pre></div></div> <p>-&gt; 현재 시점에 전체 데이터를 백업해 파일(<code class="language-plaintext highlighter-rouge">backup_sunday_1_PM.sql</code>)을 만들라는 의미</p> <ul> <li><code class="language-plaintext highlighter-rouge">--all-databases</code>: 모든 database를 백업합니다.</li> <li><code class="language-plaintext highlighter-rouge">--source-data</code>: 백업 시점의 <code class="language-plaintext highlighter-rouge">Binary Log</code>파일의 이름과 위치를 덤프 파일에 기록합니다.</li> <li><code class="language-plaintext highlighter-rouge">--single-transaction</code>: InnoDB 테이블에 대한 <strong>일관된 읽기</strong> 제공하여 데이터 무결성을 보장합니다.</li> </ul> <blockquote> <p>일관된 읽기</p> <ul> <li>다른 클라이언트가 데이터 테이블에 변경한 사항은 mysqldump 프로세스에서 볼 수 없도록 함</li> <li>만약, 백업 작업에 비트랜잭션 테이블이 포함된 경우 일관성을 위해 백업 중에 변경되지 않아야 합니다. <ul> <li>For example, 백업 중에 MySQL 계정에 대한 관리 변경</li> </ul> </li> </ul> </blockquote> <p>이후에 주기적으로 백업한다면, (이전 백업파일은 삭제하고, 생략가능) 다시 전체 백업을 진행합니다.</p> <p>복원시에는 아래와 같은 명령어를 이용해 복원할 수 있습니다.</p> <div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$&gt;</span> mysql &lt; backup_sunday_1_PM.sql
</code></pre></div></div> <h3 id="증분-백업변경에-대한-백업을-같이-이용하기"> <a href="#증분-백업변경에-대한-백업을-같이-이용하기" class="anchor-heading" aria-labelledby="증분-백업변경에-대한-백업을-같이-이용하기"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 증분 백업(변경에 대한 백업)을 같이 이용하기 </h3> <p>만약 여기서, 일부 백업도 같이 이용한다면 어떤 방식일까요?</p> <div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$&gt;</span> mysqldump <span class="nt">--single-transaction</span> <span class="nt">--flush-logs</span> <span class="nt">--source-data</span><span class="o">=</span>2 <span class="nt">--all-databases</span> <span class="o">&gt;</span> backup_sunday_1_PM.sql
</code></pre></div></div> <p>-&gt; 현재 시점에 전체 데이터를 백업해 파일(<code class="language-plaintext highlighter-rouge">backup_sunday_1_PM.sql</code>)을 만들고, 이후의 변경 데이터는 <code class="language-plaintext highlighter-rouge">Binary Log</code>에 저장하도록 설정하는 의미</p> <ul> <li><code class="language-plaintext highlighter-rouge">--flush-logs</code>: 백업 시 로그를 플러시하여 새로운 <code class="language-plaintext highlighter-rouge">Binary Log</code> 파일을 시작합니다.</li> <li> <p><code class="language-plaintext highlighter-rouge">--source-data=2</code>: 현재 <code class="language-plaintext highlighter-rouge">Binary Log</code> 파일과 포지션 정보를 백업 파일에 기록합니다.</p> <div class="language-text highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  -- Position to start replication or point-in-time recovery from
  -- CHANGE REPLICATION SOURCE TO SOURCE_LOG_FILE='gbichot2-bin.000007',SOURCE_LOG_POS=4;
</code></pre></div> </div> <ul> <li>1번째 줄: 덤프 파일(=<code class="language-plaintext highlighter-rouge">backup_sunday_1_PM.sql</code>)에는 “gbichot2-bin.000007” <code class="language-plaintext highlighter-rouge">Binary Log</code> 파일이나 그 이상에 기록된 변경 사항 이전에 작성된 모든 변경 사항이 포함되어 있습니다.</li> <li>백업 후 기록된 모든 데이터 변경 사항은 덤프 파일(=<code class="language-plaintext highlighter-rouge">backup_sunday_1_PM.sql</code>)에는 없지만, “gbichot2-bin.000007” <code class="language-plaintext highlighter-rouge">Binary Log</code> 파일 이상에는 존재합니다.</li> </ul> </li> </ul> <p>이후에 주기적으로 백업을 수행한다면, <code class="language-plaintext highlighter-rouge">mysqladmin flush-logs</code> 명령어를 이용해 새 <code class="language-plaintext highlighter-rouge">Binary Log</code>에 이후 변경 데이터를 저장하도록 합니다.</p> <p>순서 정리</p> <ol> <li>1일 오후 1시: <code class="language-plaintext highlighter-rouge">mysqldump</code>를 이용해 전체 데이터 백업 + 이후 변경 데이터는 <code class="language-plaintext highlighter-rouge">Binary Log</code>에 저장 <ul> <li>전체 데이터: <code class="language-plaintext highlighter-rouge">backup_sunday_1_PM.sql</code>에 저장</li> <li>변경 데이터: <code class="language-plaintext highlighter-rouge">gbichot2-bin.000007</code>에 저장</li> </ul> </li> <li>8일 오후 1시: <code class="language-plaintext highlighter-rouge">mysqladmin flush-logs</code>로 새로운 변경 데이터 저장 <ul> <li>변경 데이터: <code class="language-plaintext highlighter-rouge">gbichot2-bin.000008</code>에 저장</li> <li>이전 데이터가 삭제되지 않고, <code class="language-plaintext highlighter-rouge">gbichot2-bin.000007</code>에 저장된 변경데이터를 <code class="language-plaintext highlighter-rouge">gbichot2-bin.000008</code>에 저장</li> </ul> </li> <li>15일 오후 1시: <code class="language-plaintext highlighter-rouge">mysqladmin flush-logs</code>로 새로운 변경 데이터 저장 <ul> <li>변경 데이터: <code class="language-plaintext highlighter-rouge">gbichot2-bin.000009</code>에 저장</li> <li>이전 데이터가 삭제되지 않고, <code class="language-plaintext highlighter-rouge">gbichot2-bin.000008</code>에 저장된 변경데이터를 <code class="language-plaintext highlighter-rouge">gbichot2-bin.000009</code>에 저장</li> </ul> </li> </ol> <p>복원시에는 전체 백업 데이터를 이용해 복원한 후, <code class="language-plaintext highlighter-rouge">Binary Log</code>파일을 순서대로 적용해 복원합니다.</p> <ul> <li> <p>전체 데이터 복원</p> <div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="nv">$&gt;</span> mysql &lt; backup_sunday_1_PM.sql
</code></pre></div> </div> </li> <li> <p>변경 데이터 복원</p> <div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="nv">$&gt;</span> mysqlbinlog gbichot2-bin.000007 gbichot2-bin.000008 | mysql
</code></pre></div> </div> </li> </ul> <h3 id="주의"> <a href="#주의" class="anchor-heading" aria-labelledby="주의"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 주의 </h3> <p>백업 데이터가 누적되면 용량이 커질 수 있으니, 적절한 주기로 백업데이터를 삭제하거나 압축하여 관리해야합니다.</p> <h3 id="고려사항"> <a href="#고려사항" class="anchor-heading" aria-labelledby="고려사항"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 고려사항 </h3> <ul> <li>클라이언트가 DB에 접근하는 주요 시간: 사용량이 적은 기간이 예측된다면, 백업을 예약하는 것이 좋습니다.</li> <li>변경 사항이 발생하는 주기: 잦은 변경사항이 있다면, 전체 백업과 증분 백업을 고려하세요.</li> <li>DB의 변경 범위: DB 전체가 변경되는지, 일부분만 변경되는지에 따라 부분 백업이나 전체 백업을 부분 백업을 진행하세요.</li> <li>백업을 위한 디스크 공간</li> <li>백업을 유지할 기간: 비즈니스 로직에서 유지되어야하는 기간을 고려하며 백업 일정을 설정하고, 백업 데이터를 삭제시에 삭제해도 유지되어야하는 기간에 대해서는 관계가 없는지 확인해야합니다.</li> <li>백업 테스트: 백업을 테스트 하기 전까지는 제대로 백업이 되는지 알 수 없고, 복원에 사용될 수 있을지 알 수 없습니다.</li> </ul> <h3 id="참고-자료"> <a href="#참고-자료" class="anchor-heading" aria-labelledby="참고-자료"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 참고 자료 </h3> <ul> <li> <p><a href="https://dev.mysql.com/doc/refman/8.4/en/backup-and-recovery.html">Mysql docs - Chapter 9 Backup and Recovery</a></p> </li> <li> <p><a href="https://learn.microsoft.com/ko-kr/sql/relational-databases/backup-restore/back-up-and-restore-of-sql-server-databases?view=sql-server-ver16">microsoft learn - SQL Server 데이터베이스 백업 및 복원</a></p> </li> </ul> </main> </div> </div> <div class="search-overlay"></div> </div> </body> </html>
