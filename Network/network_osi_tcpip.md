# OSI 7계층 & TCP/IP 4계층

## 1️⃣ OSI 7계층

### 개념
![](/Network/img/network_osi_tcpip_1.png)

- **네트워크 통신**이 일어나는 과정을 7단계로 나눔. 

- ISO(국제 표준화 기구)에서 정의한 네트워크 표준 모델

- 통신이 일어나는 과정을 단계별로 알 수 있고, 7단계 중 특정한 곳에 이상이 생기면 다른 단계와 독립적으로 그 단계만 수정할 수 있음

⇒ **개발 및 유지보수 용이**

### 1️⃣ 계층 - 물리  계층 (Physical Layer)
- 장치 간 전기적 신호를 전달하는 계층.
- 데이터 프레임 내부의 각 bit를 한 노드에서 다음 노드로 이동시킴.
- 컴퓨터의 `전기적인 신호`를 곡선 형태의 `아날로그 신호`로 변경하는 과정이 필요 - 인코딩, 디코딩
- 데이터 단위 : bit (1과 0)
- 프로토콜 : DSL, ISDN 등
- 장비  : 통신 케이블, 허브, 리피터
  
![](/Network/img/network_osi_tcpip_2.png)

### 2️⃣ 계층 - 데이터 링크 계층(DataLink Layer)
- 데이터를 `frame` 단위로, 한 네트워크 요소에서 이웃 네트워크 요소로 전송하는 계층
- 네트워크 계층에 데이터를 전달하고, 물리 계층에서 발생하는 오류를 탐지하고 수정
    - `MAC 주소`라는 물리적 주소를 사용하여 각 기기를 구분
    - 양쪽의 데이터 속도를 조절하기 위해, 데이터의 양을 조정하는 `흐름 제어` 기능 제공
    - 손상되거나 손실된 프레임을 감지하고 재전송하는 `오류 제어` 기능 제공
- 데이터 단위 : frame
    - 데이터를 전송할 때 `데이터의 시작과 끝`을 알리기 위해, 프레임의 시작과 끝에 **특수 비트 패턴**을 첨부하여 수행
- 프로토콜 : PPP, Ethernet, Token ring, IEE 802.11(Wifi) 등
- 장비  : 스위치, 브릿지

![](/Network/img/network_osi_tcpip_3.png)

### 3️⃣ 계층 - 네트워크 계층 (Network Layer)
- `IP`로 **도착지**를 찾고, `라우팅`을 통해 도착지까지 **최적의 경로** 탐색하는 계층
- `패킷`을 목적지까지 전달하는 기능을 수행하며, 이 과정에서 `라우팅 알고리즘` 사용
    - 라우팅 알고리즘 : 데이터를 전송할 최적의 경로를 찾음
- 전송 계층에게 전달 받은 목적지 주소를 이용해서 패킷을 만들고, 그 목적지의 전송 계층으로 패킷 전달
- 데이터 단위 : datagram, packet
- 프로토콜 : **IP**, ICMP, ARP, RIP, BGP 등

![](/Network/img/network_osi_tcpip_4.png)

### 4️⃣ 계층 - 전송 계층 (Transport Layer)
- 상위 계층의 메시지를 하위 계층으로 전송하는 계층
    - `포트 번호`를 관리하여 수신된 데이터가 어느 응용프로그램에 전송될지 판독
    - 데이터 전송
        - 메시지가 클 경우 **나눠서**(Segmentation) 네트워크 계층으로 전달.
        - 받은 패킷을 **재조립해서** 상위 계층으로 전달
    - 전송사용 프로토콜 결정 -TCP or UDP
        - `TCP` :  3-way handshake로 연결을 설정하고, 연결 종료 시 4-way handshake를 수행
            
          ⇒ **신뢰성** 있는 데이터 전송 보장
            
        - `UDP` : 데이터 전송 시, 패킷의 순서와 신뢰성 고려X
            
          ⇒ **빠른** 데이터 전송
            
    - 메시지의 오류를 제어
- 데이터 단위 : segment
- 프로토콜 : TCP, UDP, ARP, SCTP 등
- 장비 : GateWay

![](/Network/img/network_osi_tcpip_5.png)
 
### 5️⃣ 계층 - 세션 계층 (Session Layer)
- 통신을 위해, 두 컴퓨터 사이에 `연결`을 형성/유지/종료
- 논리적인 연결을 설정하고 유지하는 기능을 수행
    - 송신시 : 데이터 복구를 위한 동기점 생성
    - 수신시 : 동기점 확인
- 데이터를 상대방이 보내고 있을 때, 전이중/반이중 통신 결정
    - 전이중 : 동시에 보냄 - ex) 전화기
    - 반이중 : 동시에 보내지 X - ex) 무전기
- 데이터 단위 : message
- 프로토콜 : NetBIOS, TLS 등
  
![](/Network/img/network_osi_tcpip_6.png)

### 6️⃣ 계층 - 표현 계층 (Presentation Layer)
- 응용 계층으로부터 받은 데이터를 수신측에 **알맞는 코드 및 형식**으로 변환하거나, 그 반대의 과정을 수행. 필요시에 **암호화/복호화** 수행
    - 응용 프로그램 ⇔ 네트워크 간 정해진 형식대로 데이터를 변환
- 데이터 단위 : message
- 프로토콜 : ASCII, MPEG 등

![](/Network/img/network_osi_tcpip_7.png)

### 7️⃣ 계층 - 응용 계층 (Application Layer)
- 사용자에게 가장 가까운 계층이며 `응용 프로그램`을 통해 사용자와 직접적으로 상호작용
    - 응용 서비스를 수행하고 사용자 인터페이스를 제공
- 데이터 단위 : message
- 프로토콜 : HTTP, SMTP, FTP, SIP 등

![](/Network/img/network_osi_tcpip_8.png)

## 2️⃣ TCP/IP 4계층

### 개념
- 대부분의 컴퓨터가 기본으로 제공하는 인터넷 표준 프로토콜
- TCP/IP는 데이터 전송 과정을 4계층으로 나누며, OSI 모델과 다르게 각 계층이 서로 **종속적**
    - ex) 네트워크 계층(IP)에서 잘못된 패킷을 전송하면, 상위 계층(TCP/UDP)에서 이를 바로잡아야 하거나 에러가 전파됨
- ARPANET이 개발된 이후 현재의 인터넷으로 발전해나가는 과정에서 대부분의 데이터 통신이 **TCP와 IP 기반**으로 이루어졌기 때문에, 인터넷 프로토콜 그 자체를 표현하는 용어

![](/Network/img/network_osi_tcpip_9.png)

### 1️⃣ 계층 - 네트워크 인터페이스(Network Interface) 계층 
- OSI 7계층의 물리 계층과 데이터 링크 계층에 해당
- HW 요소와 관련된 모든 것을 지원하는 계층
- 물리적인 주소로 `MAC`을 사용
- 프로토콜 : Ethernet, Token Ring, PPP 등

### 2️⃣ 계층 - 인터넷 계층(Internet Layer)
- OSI 7계층의 네트워크 계층에 해당
- 통신 노드 간의 `IP 패킷을 전송`하는 기능과 `라우팅` 기능을 담당
    - 상위 전송 계층에서 받은 데이터에 IP 패킷 헤더를 붙여, IP패킷을 만들어 전송
- 프로토콜 : IP, ICMP, ARP, RARP, OSPF, BGP 등

### 3️⃣ 계층 - 전송 계층(Transport Layer)
- OSI 7계층의 전송 계층에 해당
- 통신 노드 간의 `연결을 제어`하고, 신뢰성 있는 `데이터 전송`
- 프로토콜 : TCP, UDP 등
   
### 4️⃣ 계층 - 응용 계층(Application Layer)
- OSI 7계층의 세션 계층, 표현 계층, 응용 계층에 해당
- TCP/UDP 기반의 `응용 프로그램`을 구현할 때 사용
    - 응용프로그램들이 네트워크서비스, 메일서비스, 웹서비스 등을 할 수 있도록 표준적인 `인터페이스`를 제공
- 프로토콜 : SMTP, FTP, HTTP, SSH, DNS 등
